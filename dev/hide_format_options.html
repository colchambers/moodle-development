<html>
<head>
<link rel="stylesheet" type="text/css" href="../assets/ou-header.css">
<link rel="stylesheet" type="text/css" href="../assets/styles.css">
<link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/3.2.0/build/cssfonts/fonts-min.css" /> 
<script type="text/javascript" src="http://yui.yahooapis.com/3.2.0/build/yui/yui-min.js"></script>
<script type="text/javascript" src="../js/display.js"></script>
<script type="text/javascript" src="../js/question-authoring.js"></script>

<!-- debugging library -->
<script type="text/javascript" src="../js/analyse.js"></script>
<style>
.mform fieldset {
border-color: #DDD;
}
styles.css:2229
.mform fieldset {
border: 1px solid;
}
</style>
</head>
<body>
<div id="demo"> 
 
    <h2>Editing an essay question</h2> 
 
    <div id="demo">
        <h3>You have permission to:</h3>
        <ul>
            <li>Edit this question</li>
            <li>Move this question</li>
            <li>Save this as a new question</li>
        </ul>
    </div> 
</div> 

    <form class="mform">
    <fieldset class="clearfix" id="generalheader">
        <legend class="ftoggler">General</legend>
		<div class="advancedbutton"></div>
        <div class="fcontainer clearfix">
		
    		<div class="fitem">
                <div class="fitemtitle"><div class="fgrouplabel"><label>Current category </label></div></div>
                <fieldset class="felement fgroup">Default for c101 (9)&nbsp;
                    <span><input name="usecurrentcat" value="1" id="id_e3ef7e" checked="checked" type="checkbox">
                        <label for="id_e3ef7e">Use this category</label>
                    </span>
                </fieldset>
            </div>
    		<div class="fitem">
                <div class="fitemtitle"><label for="id_categorymoveto">Save in category </label></div>
                <div class="felement fquestioncategory">
                    <select disabled="disabled" name="categorymoveto" id="id_categorymoveto">
        	            <optgroup label="Website: c101">
                            <option value="4,444" selected="selected">Default for c101 (9)</option>
        	            </optgroup>
                    </select>
                </div>
            </div>
    		<div class="fitem required">
                <div class="fitemtitle">
                    <label for="id_name">Question name<img class="req" title="Required field" alt="Required field" src="../assets/image_011.gif"> </label>
                </div>
                <div class="felement ftext">
                    <input size="50" name="name" value="Essay" onblur="validate_qtype_essay_edit_form_name(this)" onchange="validate_qtype_essay_edit_form_name(this)" id="id_name" type="text">
                </div>
    		</div>
                
            <div class="fitem">
                <div class="fitemtitle">
                    <label for="id_questiontext">Question text </label>
                </div>
                <div class="felement feditor">
                    <div>
                        <div>
                            <textarea  id="id_questiontext" name="questiontext[text]" rows="5" cols="80" class="mceEditor">
                                &lt;p&gt;Can you write an essay?&lt;/p&gt;</textarea>
                        </div>
                        <div><select name="questiontext[format]"><option value="1" selected="selected">HTML format</option></select></div>
                    </div>
                </div>
            </div>
        	<div class="fitem required">
                <div class="fitemtitle">
                    <label for="id_defaultmark">Default mark<img class="req" title="Required field" alt="Required field" src="../assets/image_011.gif"> </label></div><div class="felement ftext"><input size="3" name="defaultmark" value="1.0000000" onblur="validate_qtype_essay_edit_form_defaultmark(this)" onchange="validate_qtype_essay_edit_form_defaultmark(this)" id="id_defaultmark" type="text"></div></div>
    		<div class="fitem">
                <div class="fitemtitle">
                    <label for="id_generalfeedback">General feedback 
                        <span class="helplink"><a href="#" title="Help with General feedback" id="helpicon4da31cded8082">
                            <img src="../assets/image.png" alt="General feedback" class="iconhelp"></a>
                        </span>&nbsp;
                    </label>
                </div>
                <div class="felement feditor">
                    <div>
                        <div>
                            <textarea  id="id_generalfeedback" name="generalfeedback[text]" rows="10" cols="80" class="mceEditor">
                                &lt;p&gt;Did you write an essay?&lt;/p&gt;</textarea>
                        </div>
                        <div><select name="generalfeedback[format]"><option value="1" selected="selected">HTML format</option></select></div>
                    </div>
                </div>
            </div>
    		<div class="fitem"><div class="fitemtitle"><label for="id_responseformat">Response format </label></div><div class="felement fselect"><select name="responseformat" id="id_responseformat">
            	<option value="editor" selected="selected">HTML editor</option>
            	<option value="editorfilepicker">HTML editor with file picker</option>
            	<option value="plain">Plain text</option>
            	<option value="monospaced">Plain text, monospaced font</option>
            </select></div></div>
                		<div class="fitem"><div class="fitemtitle"><label for="id_responsefieldlines">Input box size </label></div><div class="felement fselect"><select name="responsefieldlines" id="id_responsefieldlines">
                	<option value="5">5 lines</option>
                	<option value="10">10 lines</option>
                	<option value="15" selected="selected">15 lines</option>
                	<option value="20">20 lines</option>
                	<option value="25">25 lines</option>
                	<option value="30">30 lines</option>
                	<option value="35">35 lines</option>
                	<option value="40">40 lines</option>
                </select>
            </div>
        </div>
    </fieldset>
    
    <fieldset class="clearfix" id="tagsheader">
            <legend class="ftoggler">Tags</legend>
    		<div class="advancedbutton"></div><div class="fcontainer clearfix">
            <div class="fitem">
                <div class="fitemtitle">
                    <div class="fgrouplabel"><label>Tags </label></div>
                </div>
                <fieldset class="felement ftags">
                    <label class="accesshide" for="id_d0b77c">Official tags (<a title="new window" href="#" id="action_link4dc126ebbda4f">Manage official tags</a>)</label>
                    <select size="1" name="tags[officialtags][]" multiple="multiple" disabled="disabled" id="id_d0b77c">
                        <option value="">None</option>
                    </select>&nbsp;
                    <label class="accesshide" for="qf_bad47e">Other tags (enter tags separated by commas)</label>
                    <textarea cols="40" rows="5" name="tags[othertags]" id="qf_bad47e" class="mceNoEditor">Tags</textarea>
                </fieldset>
            </div>
        </fieldset>
    </form>

</div>

<script type="text/javascript"> 
var Out;

YUI().use("node", function (Y) {
    function toggleSection(e, id){
      
          className = '.fcontainer ';
          Display.toggle(id+' '+className);
          // toggle image
          img = Y.one(id+' .block-hider');
          if(Display.isVisible(id+' '+className)){
              img.set('src', '../assets/switch_minus.png');
              return;
          }
          
          img.set('src', '../assets/switch_plus.png');
      
    }
    function initialiseSectionToggles (){

            var sections = ['general', 'tags'];
            var section;
            var imgHTML = '<img class="block-hider-hide block-hider" alt="Hide" title="Hide" style="padding: 5px; display: inline"';
            imgHTML+='src="../assets/switch_minus.png">';
            var sectionNode;
            var sectionTogglerNode;
            //create arbitrary context object:
            var contextObj = {
                name: "context"
            };
            for(section in sections){
                sectionNode = Y.one('#'+sections[section]+'header');
                
                // append toggle image
                img = Y.Node.create(imgHTML);
                img.set('alt', 'Hide '+sections[section]+' section');
                img.set('title', 'Hide '+sections[section]+' section');
                Y.one('#'+sections[section]+'header').insert(img, 2);
            
                Y.one('#'+sections[section]+'header .ftoggler').setStyle('float', 'left');
                
                // append onClick toggle handlers
                Y.on('click', toggleSection, ['#'+sections[section]+'header .ftoggler', '#'+sections[section]+'header .block-hider'], contextObj, '#'+sections[section]+'header');
            }
        
    }
    
    initialiseSectionToggles();
    
    function hideHtmlFormatOptions(){
        // get all select elements
        nodes = Y.all(document.getElementsByTagName('select'));
        
        // hide those with the relevant names
        nodes.each(function(node) {
            if(node.getAttribute('name') == 'questiontext[format]' 
                || node.getAttribute('name') == 'generalfeedback[format]') {
                 parent = node.get('parentNode');
                if(!parent.hide){// is new hide method implemented
                    parent.setStyle('display', 'none');
                    return;
                }
                parent.hide();
            }
        });
    }
    
    hideHtmlFormatOptions();
});

</script>

<script type="text/javascript" src="../lib/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        readonly : false,
        editor_selector : "mceEditor",
        editor_deselector : "mceNoEditor",
        plugins : "pdw, safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount",
        
        // Theme options
        theme_advanced_buttons1 : "pdw_toggle, save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
    
        // PDW Toggle Toolbars settings
        pdw_toggle_on : 1,
        pdw_toggle_toolbars : "2,3,4"
});
</script>

</body>
</html>